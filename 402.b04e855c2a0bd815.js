"use strict";(self.webpackChunktrimurti_hardware_manager=self.webpackChunktrimurti_hardware_manager||[]).push([[402],{3402:(E,c,i)=>{i.r(c),i.d(c,{CustomersModule:()=>j});var m=i(177),C=i(8426),u=i(467),e=i(540),h=i(2538),l=i(4341);function p(n,d){if(1&n&&(e.j41(0,"div",43)(1,"div",44)(2,"h6",45),e.EFF(3),e.k0s(),e.j41(4,"h5",46),e.EFF(5),e.k0s()()()),2&n){const t=d.$implicit;e.R7$(3),e.JRh(t.label),e.R7$(1),e.Y8G("ngClass",t.colorClass),e.R7$(1),e.JRh(t.value)}}function b(n,d){1&n&&(e.j41(0,"span",54),e.EFF(1,"Active"),e.k0s())}const g=function(n){return{"text-danger":n}};function _(n,d){if(1&n){const t=e.RV6();e.j41(0,"tr")(1,"td"),e.EFF(2),e.DNE(3,b,2,0,"span",47),e.k0s(),e.j41(4,"td"),e.EFF(5),e.nrm(6,"br"),e.j41(7,"small",2),e.EFF(8),e.k0s()(),e.j41(9,"td"),e.EFF(10),e.k0s(),e.j41(11,"td",46),e.EFF(12),e.k0s(),e.j41(13,"td"),e.EFF(14),e.k0s(),e.j41(15,"td"),e.EFF(16),e.nI1(17,"date"),e.k0s(),e.nrm(18,"td"),e.j41(19,"td")(20,"button",48),e.bIt("click",function(){const o=e.eBV(t).$implicit,a=e.XpG();return e.Njj(a.viewCustomer(o))}),e.nrm(21,"i",49),e.k0s(),e.j41(22,"button",50),e.bIt("click",function(){const o=e.eBV(t).$implicit,a=e.XpG();return e.Njj(a.openEditModal(o))}),e.nrm(23,"i",51),e.k0s(),e.j41(24,"button",52),e.bIt("click",function(){const o=e.eBV(t).$implicit,a=e.XpG();return e.Njj(a.deleteCustomer(o.id))}),e.nrm(25,"i",53),e.k0s()()()}if(2&n){const t=d.$implicit;e.R7$(2),e.SpI("",t.name," "),e.R7$(1),e.Y8G("ngIf",t.active),e.R7$(2),e.JRh(t.phone),e.R7$(3),e.JRh(t.email),e.R7$(2),e.JRh(t.address),e.R7$(1),e.Y8G("ngClass",e.eq3(11,g,t.udhari>0)),e.R7$(1),e.SpI("\u20b9",t.udhari,""),e.R7$(2),e.SpI("\u20b9",t.totalPurchases,""),e.R7$(2),e.JRh(e.bMT(17,9,t.lastTransaction))}}function F(n,d){if(1&n&&(e.j41(0,"div",23)(1,"p")(2,"strong"),e.EFF(3,"Name:"),e.k0s(),e.EFF(4),e.k0s(),e.j41(5,"p")(6,"strong"),e.EFF(7,"Phone:"),e.k0s(),e.EFF(8),e.k0s(),e.j41(9,"p")(10,"strong"),e.EFF(11,"Email:"),e.k0s(),e.EFF(12),e.k0s(),e.j41(13,"p")(14,"strong"),e.EFF(15,"Address:"),e.k0s(),e.EFF(16),e.k0s()()),2&n){const t=e.XpG();e.R7$(4),e.SpI(" ",t.selectedCustomer.name,""),e.R7$(4),e.SpI(" ",t.selectedCustomer.phone,""),e.R7$(4),e.SpI(" ",t.selectedCustomer.email,""),e.R7$(4),e.SpI(" ",t.selectedCustomer.address,"")}}function f(n,d){if(1&n){const t=e.RV6();e.j41(0,"div",23)(1,"div",55)(2,"label"),e.EFF(3,"Name"),e.k0s(),e.j41(4,"input",25),e.bIt("ngModelChange",function(s){e.eBV(t);const o=e.XpG();return e.Njj(o.selectedCustomer.name=s)}),e.k0s()(),e.j41(5,"div",55)(6,"label"),e.EFF(7,"Phone"),e.k0s(),e.j41(8,"input",26),e.bIt("ngModelChange",function(s){e.eBV(t);const o=e.XpG();return e.Njj(o.selectedCustomer.phone=s)}),e.k0s()(),e.j41(9,"div",55)(10,"label"),e.EFF(11,"Email"),e.k0s(),e.j41(12,"input",27),e.bIt("ngModelChange",function(s){e.eBV(t);const o=e.XpG();return e.Njj(o.selectedCustomer.email=s)}),e.k0s()(),e.j41(13,"div",55)(14,"label"),e.EFF(15,"Address"),e.k0s(),e.j41(16,"textarea",56),e.bIt("ngModelChange",function(s){e.eBV(t);const o=e.XpG();return e.Njj(o.selectedCustomer.address=s)}),e.k0s()()()}if(2&n){const t=e.XpG();e.R7$(4),e.Y8G("ngModel",t.selectedCustomer.name),e.R7$(4),e.Y8G("ngModel",t.selectedCustomer.phone),e.R7$(4),e.Y8G("ngModel",t.selectedCustomer.email),e.R7$(4),e.Y8G("ngModel",t.selectedCustomer.address)}}const v=[{path:"",component:(()=>{class n{constructor(t){this.customersService=t,this.searchText="",this.filter="all",this.stats=[{label:"Total Customers",value:"0",colorClass:"text-primary"},{label:"Total Udhari",value:"\u20b90",colorClass:"text-danger"},{label:"With Udhari",value:"0",colorClass:"text-warning"},{label:"Active Customers",value:"0",colorClass:"text-success"}],this.customers=[],this.selectedCustomer=null,this.newCustomer={name:"",phone:"",email:"",address:"",udhari:0,totalPurchases:0,lastTransaction:(new Date).toISOString(),active:!0}}ngOnInit(){this.loadCustomers()}loadCustomers(){var t=this;return(0,u.A)(function*(){t.customers=yield t.customersService.getAll(),t.updateStats()})()}viewCustomer(t){this.selectedCustomer=t}openEditModal(t){this.selectedCustomer={...t}}saveEditCustomer(t){var r=this;return(0,u.A)(function*(){t.id&&(yield r.customersService.updateCustomer(t.id,t),yield r.loadCustomers())})()}deleteCustomer(t){var r=this;return(0,u.A)(function*(){t&&confirm("Are you sure you want to delete this customer?")&&(yield r.customersService.deleteCustomer(t),yield r.loadCustomers())})()}filteredCustomers(){return this.customers.filter(t=>(!this.searchText||t.name.toLowerCase().includes(this.searchText.toLowerCase())||t.phone.includes(this.searchText)||t.email.toLowerCase().includes(this.searchText.toLowerCase()))&&("all"===this.filter||"withUdhari"===this.filter&&t.udhari>0||"noUdhari"===this.filter&&0===t.udhari))}setFilter(t){this.filter=t}addCustomer(){var t=this;return(0,u.A)(function*(){yield t.customersService.add(t.newCustomer),t.newCustomer={name:"",phone:"",email:"",address:"",udhari:0,totalPurchases:0,lastTransaction:(new Date).toISOString(),active:!0},document.getElementById("closeAddCustomerModal")?.click(),t.loadCustomers()})()}updateStats(){const t=this.customers.length,r=this.customers.filter(a=>a.udhari>0).length,s=this.customers.reduce((a,M)=>a+M.udhari,0),o=this.customers.filter(a=>a.active).length;this.stats[0].value=t.toString(),this.stats[1].value=`\u20b9${s}`,this.stats[2].value=r.toString(),this.stats[3].value=o.toString()}static{this.\u0275fac=function(r){return new(r||n)(e.rXU(h.h))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-customers"]],decls:103,vars:17,consts:[[1,"container-fluid","mt-4"],[1,"mb-1"],[1,"text-muted"],[1,"row","mb-4"],["class","col-md-3 mb-2",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],["type","text","placeholder","Search customers...",1,"form-control","w-50",3,"ngModel","ngModelChange"],[1,"btn-group","ms-2"],[1,"btn","btn-outline-secondary","btn-sm",3,"click"],["data-bs-toggle","modal","data-bs-target","#addCustomerModal",1,"btn","btn-primary","btn-sm","ms-2"],[1,"fas","fa-user-plus","me-1"],[1,"btn","btn-success","btn-sm","ms-2"],[1,"fas","fa-file-csv","me-1"],[1,"table-responsive","shadow-sm","rounded"],[1,"table","align-middle","mb-0"],[1,"table-light"],[4,"ngFor","ngForOf"],["id","addCustomerModal","tabindex","-1",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-bs-dismiss","modal",1,"btn-close"],[1,"modal-body"],[1,"mb-2"],["type","text","name","name",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","phone",1,"form-control",3,"ngModel","ngModelChange"],["type","email","name","email",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","address",1,"form-control",3,"ngModel","ngModelChange"],["type","number","name","udhari",1,"form-control",3,"ngModel","ngModelChange"],["type","number","name","totalPurchases",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],["id","closeAddCustomerModal","type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","button",1,"btn","btn-primary",3,"click"],["id","viewCustomerModal","tabindex","-1","aria-labelledby","viewCustomerLabel","aria-hidden","true",1,"modal","fade"],["id","viewCustomerLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],["class","modal-body",4,"ngIf"],["id","editCustomerModal","tabindex","-1","aria-labelledby","editCustomerLabel","aria-hidden","true",1,"modal","fade"],[3,"ngSubmit"],["id","editCustomerLabel",1,"modal-title"],["type","submit",1,"btn","btn-success"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],[1,"col-md-3","mb-2"],[1,"card","shadow-sm","border-0","p-3","text-center","h-100"],[1,"text-muted","mb-1"],[3,"ngClass"],["class","badge bg-success ms-2",4,"ngIf"],["data-bs-toggle","modal","data-bs-target","#viewCustomerModal",1,"btn","btn-sm","btn-info","me-1",3,"click"],[1,"fas","fa-eye"],["data-bs-toggle","modal","data-bs-target","#editCustomerModal",1,"btn","btn-sm","btn-warning","me-1",3,"click"],[1,"fas","fa-edit"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"fas","fa-trash"],[1,"badge","bg-success","ms-2"],[1,"mb-3"],["name","address",1,"form-control",3,"ngModel","ngModelChange"]],template:function(r,s){1&r&&(e.j41(0,"div",0)(1,"h4",1),e.EFF(2,"Customer Management"),e.k0s(),e.j41(3,"p",2),e.EFF(4,"Manage customer information and track udhari balances"),e.k0s(),e.j41(5,"div",3),e.DNE(6,p,6,3,"div",4),e.k0s(),e.j41(7,"div",5)(8,"input",6),e.bIt("ngModelChange",function(a){return s.searchText=a}),e.k0s(),e.j41(9,"div",7)(10,"button",8),e.bIt("click",function(){return s.setFilter("all")}),e.EFF(11,"All"),e.k0s(),e.j41(12,"button",8),e.bIt("click",function(){return s.setFilter("withUdhari")}),e.EFF(13,"With Udhari"),e.k0s(),e.j41(14,"button",8),e.bIt("click",function(){return s.setFilter("noUdhari")}),e.EFF(15,"No Udhari"),e.k0s()(),e.j41(16,"div")(17,"button",9),e.nrm(18,"i",10),e.EFF(19," Add Customer "),e.k0s(),e.j41(20,"button",11),e.nrm(21,"i",12),e.EFF(22," Import CSV"),e.k0s()()(),e.j41(23,"div",13)(24,"table",14)(25,"thead",15)(26,"tr")(27,"th"),e.EFF(28,"Customer Name"),e.k0s(),e.j41(29,"th"),e.EFF(30,"Contact Info"),e.k0s(),e.j41(31,"th"),e.EFF(32,"Address"),e.k0s(),e.j41(33,"th"),e.EFF(34,"Udhari Balance"),e.k0s(),e.j41(35,"th"),e.EFF(36,"Total Purchases"),e.k0s(),e.j41(37,"th"),e.EFF(38,"Last Transaction"),e.k0s(),e.j41(39,"th"),e.EFF(40,"Actions"),e.k0s()()(),e.j41(41,"tbody"),e.DNE(42,_,26,13,"tr",16),e.k0s()()()(),e.j41(43,"div",17)(44,"div",18)(45,"div",19)(46,"div",20)(47,"h5",21),e.EFF(48,"Add Customer"),e.k0s(),e.nrm(49,"button",22),e.k0s(),e.j41(50,"div",23)(51,"form")(52,"div",24)(53,"label"),e.EFF(54,"Name"),e.k0s(),e.j41(55,"input",25),e.bIt("ngModelChange",function(a){return s.newCustomer.name=a}),e.k0s()(),e.j41(56,"div",24)(57,"label"),e.EFF(58,"Phone"),e.k0s(),e.j41(59,"input",26),e.bIt("ngModelChange",function(a){return s.newCustomer.phone=a}),e.k0s()(),e.j41(60,"div",24)(61,"label"),e.EFF(62,"Email"),e.k0s(),e.j41(63,"input",27),e.bIt("ngModelChange",function(a){return s.newCustomer.email=a}),e.k0s()(),e.j41(64,"div",24)(65,"label"),e.EFF(66,"Address"),e.k0s(),e.j41(67,"input",28),e.bIt("ngModelChange",function(a){return s.newCustomer.address=a}),e.k0s()(),e.j41(68,"div",24)(69,"label"),e.EFF(70,"Udhari Balance"),e.k0s(),e.j41(71,"input",29),e.bIt("ngModelChange",function(a){return s.newCustomer.udhari=a}),e.k0s()(),e.j41(72,"div",24)(73,"label"),e.EFF(74,"Total Purchases"),e.k0s(),e.j41(75,"input",30),e.bIt("ngModelChange",function(a){return s.newCustomer.totalPurchases=a}),e.k0s()()()(),e.j41(76,"div",31)(77,"button",32),e.EFF(78,"Cancel"),e.k0s(),e.j41(79,"button",33),e.bIt("click",function(){return s.addCustomer()}),e.EFF(80,"Add Customer"),e.k0s()()()()(),e.j41(81,"div",34)(82,"div",18)(83,"div",19)(84,"div",20)(85,"h5",35),e.EFF(86,"Customer Details"),e.k0s(),e.nrm(87,"button",36),e.k0s(),e.DNE(88,F,17,4,"div",37),e.k0s()()(),e.j41(89,"div",38)(90,"div",18)(91,"form",39),e.bIt("ngSubmit",function(){return s.saveEditCustomer(s.selectedCustomer)}),e.j41(92,"div",19)(93,"div",20)(94,"h5",40),e.EFF(95,"Edit Customer"),e.k0s(),e.nrm(96,"button",22),e.k0s(),e.DNE(97,f,17,4,"div",37),e.j41(98,"div",31)(99,"button",41),e.EFF(100,"Save Changes"),e.k0s(),e.j41(101,"button",42),e.EFF(102,"Cancel"),e.k0s()()()()()()),2&r&&(e.R7$(6),e.Y8G("ngForOf",s.stats),e.R7$(2),e.Y8G("ngModel",s.searchText),e.R7$(2),e.AVh("active","all"===s.filter),e.R7$(2),e.AVh("active","withUdhari"===s.filter),e.R7$(2),e.AVh("active","noUdhari"===s.filter),e.R7$(28),e.Y8G("ngForOf",s.filteredCustomers()),e.R7$(13),e.Y8G("ngModel",s.newCustomer.name),e.R7$(4),e.Y8G("ngModel",s.newCustomer.phone),e.R7$(4),e.Y8G("ngModel",s.newCustomer.email),e.R7$(4),e.Y8G("ngModel",s.newCustomer.address),e.R7$(4),e.Y8G("ngModel",s.newCustomer.udhari),e.R7$(4),e.Y8G("ngModel",s.newCustomer.totalPurchases),e.R7$(13),e.Y8G("ngIf",s.selectedCustomer),e.R7$(9),e.Y8G("ngIf",s.selectedCustomer))},dependencies:[m.YU,m.Sq,m.bT,l.qT,l.me,l.Q0,l.BC,l.cb,l.vS,l.cV,m.vh]})}}return n})()}];let k=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=e.$C({type:n})}static{this.\u0275inj=e.G2t({imports:[C.iI.forChild(v),C.iI]})}}return n})(),j=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=e.$C({type:n})}static{this.\u0275inj=e.G2t({imports:[m.MD,k,l.YN]})}}return n})()}}]);